---
title: "Agents"
description: "Understanding Agents in Agency Swarm."
icon: "robot"
---

Agents are the core building blocks of the Agency Swarm framework. Each agent is a specialized entity designed to play a specific role and perform a specific set of tasks.

Agents act as wrappers for [OpenAI Assistants](https://platform.openai.com/docs/assistants/deep-dive#creating-assistants). The `Agent` class includes convenience methods to help you manage the state of your assistant, upload files, attach tools, and more.

## Characteristics of Agents

- **Role-Based**: Agents operate based on predefined roles that guide their interactions and decision-making processes.
- **Custom Instructions**: Each agent can be configured with unique instructions, enabling specialized behavior.
- **Tools and Functions**: Agents can be equipped with various tools to enhance their capabilities.

## Agent Parameters

| Name | Parameter | Description |
|------|-----------|-------------|
| ID *(optional)* | `id` | Loads the assistant from OpenAI assistant ID. Assistant will be created or loaded from settings if ID is not provided. Default: `None` |
| Name *(optional)* | `name` | Name of the agent. Default: Uses the class name |
| Description *(optional)* | `description` | A brief description of the agent's purpose. Default: `None` |
| Instructions *(optional)* | `instructions` | Path to a file containing specific instructions for the agent. Default: Empty string |
| Tools *(optional)* | `tools` | A list of tool classes that the agent can use (BaseTool, FileSearch, or CodeInterpreter). Default: `None` |
| Tool Resources *(optional)* | `tool_resources` | Resources used by the assistant's tools. For example, code_interpreter requires file IDs, while file_search requires vector store IDs. Default: `None` |
| Temperature *(optional)* | `temperature` | Controls randomness in the agent's responses. Lower values make responses more focused and deterministic. Default: `None` |
| Top P *(optional)* | `top_p` | Alternative to temperature for controlling response randomness. Default: `None` |
| Response Format *(optional)* | `response_format` | Specifies the format for agent responses. Can be a string, dict, or Pydantic BaseModel. Default: `"auto"` |
| Tools Folder *(optional)* | `tools_folder` | Path to a directory containing tools. Each tool must be in a separate file named after the tool class. Default: `None` |
| Files Folder *(optional)* | `files_folder` | Path or list of paths to directories containing files for the agent. Default: `None` |
| Schemas Folder *(optional)* | `schemas_folder` | Path or list of paths to directories containing OpenAPI schemas. Default: `None` |
| API Headers *(optional)* | `api_headers` | Headers for OpenAPI requests. Keys must match schema filenames. Default: Empty dict |
| API Params *(optional)* | `api_params` | Extra parameters for OpenAPI requests. Keys must match schema filenames. Default: Empty dict |
| Metadata *(optional)* | `metadata` | Additional metadata for the agent. Default: Empty dict |
| Model *(optional)* | `model` | The OpenAI model to use. Default: `"gpt-4o-2024-08-06"` |
| Validation Attempts *(optional)* | `validation_attempts` | Number of attempts to validate responses. Default: `1` |
| Max Prompt Tokens *(optional)* | `max_prompt_tokens` | Maximum tokens allowed in the prompt. Default: `None` |
| Max Completion Tokens *(optional)* | `max_completion_tokens` | Maximum tokens allowed in completions. Default: `None` |
| Truncation Strategy *(optional)* | `truncation_strategy` | Strategy for handling token limits. Default: `None` |
| Examples *(optional)* | `examples` | List of example messages for the agent. Default: `None` |
| File Search *(optional)* | `file_search` | Configuration for the file search tool. Default: `None` |
| Parallel Tool Calls *(optional)* | `parallel_tool_calls` | Whether to run tools in parallel. Default: `True` |
| Refresh From ID *(optional)* | `refresh_from_id` | Whether to load and update the agent from OpenAI when an ID is provided. Default: `True` |

<Warning>
**Warning**: The `file_ids` parameter is deprecated. Use the `tool_resources` parameter instead.
</Warning>

## Creating Agents

Creating custom agents allows you to define specialized roles tailored to specific tasks within your agency. Follow these steps to create an agent:

<Steps>

<Step title="1. Import the Agent Class">

Import the `Agent` class from the `agency_swarm` module.

```python
from agency_swarm import Agent
```

</Step>

<Step title="2. Define the Agent Class">

Create a new class that inherits from `Agent` and customize its parameters.

```python
class CEO(Agent):
    def __init__(self):
        super().__init__(
            name="CEO",
            description="Responsible for client communication, task planning, and management.",
            instructions="./instructions.md",  # Path to the instructions file
            tools=[MyCustomTool],
            temperature=0.3,
            max_prompt_tokens=25000,
        )
```

</Step>

<Step title="3. Provide Instructions">

Create an `instructions.md` file with detailed instructions for the agent.

```markdown
# Agent Role

As the CEO, you are responsible for overseeing all operations.

# Goals

- Communicate with clients.
- Delegate tasks to other agents.
- Ensure project deadlines are met.

# Process Workflow

1. Receive client requests.
2. Assign tasks to appropriate agents.
3. Monitor progress and report back.
```

<Check>

**Best Practices for Writing Instructions:**

- **Clarity**: Be explicit about expectations and responsibilities to avoid ambiguity
- **Alignment**: Ensure instructions align with the overall agency objectives
- **Collaboration**: Define clear protocols for how the agent should interact with other agents
- **Decision-making**: Include specific criteria for how the agent should make decisions
- **Process Details**: Break down complex workflows into clear, actionable steps

</Check>

</Step>

<Step title="4. Initialize the Agent">

Instantiate the agent by creating an instance of your agent class.

```python
ceo = CEO()
```

</Step>

</Steps>

## Advanced Parameters

<Accordion title="Parallel Tool Calls">

Control whether to run tools in parallel or sequentially by setting the `parallel_tool_calls` parameter. By default, this parameter is set to `True`.

```python
agent = Agent(name='MyAgent', parallel_tool_calls=False)
```

With `parallel_tool_calls=False`, the agent will run all tools sequentially.

</Accordion>

<Accordion title="File Search Configuration">

Specify the file search configuration as described in the [OpenAI documentation](https://platform.openai.com/docs/api-reference/assistants/createAssistant#assistants-createassistant-tools).

```python
agent = Agent(
    name='MyAgent',
    file_search={'max_num_results': 25},
    tool_resources={'file_search': {'vector_store_ids': ["your-vector-store-id"]}}
)  # max_num_results must be between 1 and 50
```

</Accordion>

<Accordion title="Fine-Tuned Models">

Use any previously fine-tuned model by specifying the `model` parameter in the agent.

```python
agent = Agent(name='MyAgent', model='gpt-4o-mini-model-name')
```

</Accordion>

<Note>

**Note**: For more information on using OpenAPI schemas to create tools for your agents, see the [OpenAPI Schemas](/additional-features/openapi-schemas) page.

</Note>

## Importing Existing Agents

For complex use cases, you can import pre-made agents.

```bash
agency-swarm import-agent --name "AgentName" --destination "/path/to/directory"
```

This copies all source files of the agent locally. You can then import the agent as shown:

```python
from AgentName import AgentName

agent = AgentName()
```

To check available agents, simply run the command without any arguments.

## Response Validator

See the [Output Validation](/additional-features/output-validation) page for more information on how to use response validators to validate the response before sending it to the user or another agent.

## Agent Template Using the CLI

Simplify the process of creating a structured environment for each agent using the CLI command.

<Steps>

<Step title="Run the Command">

Use the `create-agent-template` command with the desired options.

```bash
agency-swarm create-agent-template --name "AgentName" --description "Agent Description" [--path "/path/to/directory"] [--use_txt]
```

</Step>

<Step title="Understand the Folder Structure">

Running the command generates the following folder structure:

```
/your-specified-path/
└── AgentName/                   # Directory for the specific agent
    ├── files/                   # Files to be uploaded to OpenAI
    ├── schemas/                 # OpenAPI schemas to be converted into tools
    ├── tools/                   # Tools to be imported by default
    ├── AgentName.py             # Main agent class file
    ├── __init__.py              # Initializes the agent folder as a Python package
    └── instructions.md or .txt  # Instruction document for the agent
```

**Explanation:**

- **files**: Store files to be uploaded to OpenAI. Acceptable formats are listed in [File Search](https://platform.openai.com/docs/assistants/tools/file-search#supported-files) and [Code Interpreter](https://platform.openai.com/docs/assistants/tools/code-interpreter#supported-files). Uploaded files receive an ID to prevent re-uploading.
- **schemas**: Store OpenAPI schemas to be automatically converted into tools. Place the schema in this folder and specify it when initializing your agent. [Read more](/additional-features/openapi-schemas).
- **tools**: Store tools as Python files. Each file must have the same name as the tool class (e.g., `ExampleTool.py` must contain a class called `ExampleTool`). [Read more](./tools).

</Step>

</Steps>

### Agent Template

The `AgentName.py` file will contain the following code:

```python
from agency_swarm import Agent

class AgentName(Agent):
    def __init__(self):
        super().__init__(
            name="agent_name",
            description="agent_description",
            instructions="./instructions.md",
            files_folder="./files",
            schemas_folder="./schemas",
            tools_folder="./tools",
            temperature=0.3,
            max_prompt_tokens=25000,
            examples=[]
        )

    def response_validator(self, message: str) -> str:
        """Validate the response before sending it."""
        if "bad word" in message:
            raise ValueError("Please avoid using inappropriate language.")
        return message
```

To initialize the agent:

```python
from AgentName import AgentName

agent = AgentName()
```

Agency Swarm comes with several built-in tools to enhance agent capabilities:

<Accordion title="Code Interpreter" icon="code">
- **Purpose**: Allows agents to execute code within a Jupyter Notebook environment (without internet access).
- **Integration**:
  ```python
  from agency_swarm.tools import CodeInterpreter

  agent = Agent(
      name="DataAnalyst",
      tools=[CodeInterpreter],
      # Other agent parameters
  )
  ```
</Accordion>

<Accordion title="File Search" icon="magnifying-glass">
- **Purpose**: Enables Retrieval-Augmented Generation (RAG) by allowing agents to search files.
- **Integration**:
  ```python
  from agency_swarm.tools import FileSearch

  agent = Agent(
      name="Researcher",
      tools=[FileSearch],
      # Other agent parameters
  )
  ```